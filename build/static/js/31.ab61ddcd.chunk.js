(this.webpackJsonpphocus=this.webpackJsonpphocus||[]).push([[31],{1351:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return W}));var a=n(31),r=n.n(a),i=n(65),c=n(15),u=n(2),o=n(0),l=n.n(o),s=n(985),d=n(794),b=n(180),j=n(79),p=n(157),f=n(238),O=n(1353),m=n(1354),v=n(1355),h=n(423),x=n(80),g=n(20),y=(x.c().shape({name:x.d().required(),JobId:x.d().required()}),function(e,t){return k(e,{deadline:t})}),k=function(e,t){return Object(g.f)("/task/".concat(e),t)},C=n(87),S=n(183),w=n(414),T=n(241),V=n(422),F=n(787),B=n(164),E=n(18),D=n(340),A=n(341),L=n(846),q=n(1390),I=n(847),R=n(1371),z=n(1401),J=Object(R.a)();function P(e){var t=e.onChange,n=l.a.useState(null),a=Object(c.a)(n,2),s=a[0],d=a[1],b=l.a.useState(!1),j=Object(c.a)(b,2),p=j[0],O=j[1],m=Object(o.useState)([]),v=Object(c.a)(m,2),h=v[0],x=v[1],y=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.d)("/tpc");case 3:(t=e.sent)&&x(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){y()}),[p]);var k=function(){V({name:""}),O(!1)},C=l.a.useState({name:""}),S=Object(c.a)(C,2),w=S[0],V=S[1],F=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!w.name){e.next=7;break}return e.next=5,n=w,Object(g.g)("/tpc",n);case 5:e.sent&&(d({name:""}),k());case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}var n}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(l.a.Fragment,{children:[Object(u.jsx)(z.a,{value:s,onChange:function(e,n){"string"===typeof n?setTimeout((function(){O(!0),V({name:n})})):n&&n.inputValue?(O(!0),V({name:n.inputValue})):(d(n),t&&t(e,n))},filterOptions:function(e,t){var n=J(e,t);return""!==t.inputValue&&n.push({inputValue:t.inputValue,name:'Add "'.concat(t.inputValue,'"')}),n},id:"tpc-autocomplete",options:h,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.name},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,renderOption:function(e){return e.name},freeSolo:!0,renderInput:function(e){return Object(u.jsx)(T.a,Object(E.a)(Object(E.a)({},e),{},{size:"small",placeholder:"Third party company",label:"TPC",title:"Third party company",name:"tpc"}))}}),Object(u.jsx)(D.a,{open:p,onClose:k,"aria-labelledby":"add-tpc-dialog",children:Object(u.jsxs)("form",{onSubmit:F,children:[Object(u.jsx)(A.a,{id:"add-tpc-dialog",children:"Add a new Third party company"}),Object(u.jsxs)(L.a,{children:[Object(u.jsx)(q.a,{children:"Did you miss any Third party company in our list? Please, add it!"}),Object(u.jsx)(T.a,{autoFocus:!0,margin:"dense",id:"name",value:w.name,onChange:function(e){return V(Object(E.a)(Object(E.a)({},w),{},{name:e.target.value}))},label:"name",type:"text",fullWidth:!0})]}),Object(u.jsxs)(I.a,{children:[Object(u.jsx)(f.a,{onClick:k,color:"primary",children:"Cancel"}),Object(u.jsx)(f.a,{type:"submit",color:"primary",children:"Add"})]})]})})]})}var G=n(865);function N(e){var t=e.open,n=e.onClose,a=e.onDone,c=e.selectedTask,o=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=8;break}return e.next=4,k(c.id,t);case 4:e.sent&&(a(),n()),e.next=12;break;case 8:return e.next=10,r=t,Object(g.g)("/task",r);case 10:e.sent&&(a(),n());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}var r}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=6;break}return e.next=4,t=c.id,Object(g.b)("/task/".concat(t));case 4:e.sent&&(a(),n());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var t}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)(S.a,{title:"Task",open:t,onClose:n,maxWidth:"xs",fullWidth:!0,children:Object(u.jsx)(p.a,{children:Object(u.jsx)(C.b,{initialValues:c||{},onSubmit:o,children:function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,r=e.errors,i=e.setFieldValue;return Object(u.jsx)(C.a,{children:Object(u.jsxs)(p.a,{display:"grid",gridTemplateColumns:"auto auto",gridColumnGap:5,gridRowGap:12,children:[Object(u.jsx)(T.a,{style:{gridColumnEnd:"span 2"},name:"name",label:"Task name",value:t.name,onChange:n,onBlur:a,error:Boolean(r.name),helperText:r.name,variant:"outlined",size:"small"}),Object(u.jsx)(V.a,{style:{gridColumnEnd:"span 2"},items:["1","2","3","4","5"],label:"Priority",name:"priority",value:t.priority,onChange:n,onBlur:a}),c&&Object(u.jsx)(G.a,{name:"deadline",style:{gridColumnEnd:"span 2"},value:t.deadline||null,onChange:function(e){return i("deadline",null===e||void 0===e?void 0:e.toString())},onBlur:a,error:Boolean(r.deadline),helperText:r.deadline,size:"small",placeholder:"Deadline",label:"Deadline"}),Object(u.jsx)(V.d,{value:t.JobId,request:F.b,getOptionLabel:function(e){return e.description},getOptionValue:function(e){return e.id},onChange:function(e,t){return i("JobId",t.id)},onBlur:a,label:"Job"}),Object(u.jsx)(V.d,{value:t.assigner,request:B.e,getOptionLabel:function(e){return e.username},getOptionValue:function(e){return e.id},onChange:function(e,t){return i("assigner",t.id)},onBlur:a,label:"Assigner"}),Object(u.jsx)(V.d,{value:t.assignee,request:B.e,getOptionLabel:function(e){return e.username},getOptionValue:function(e){return e.id},onChange:function(e,t){return i("assignee",t.id)},onBlur:a,label:"Assignee"}),Object(u.jsx)(P,{onChange:function(e,t){return i("TPCId",t.id)}}),Object(u.jsx)(T.a,{style:{gridColumnEnd:"span 2"},name:"description",label:"Task description",value:t.description,onChange:n,onBlur:a,error:Boolean(r.description),helperText:r.description,variant:"outlined",size:"small",multiline:!0,rows:3}),c?Object(u.jsxs)(p.a,{children:[Object(u.jsx)(w.a,{type:"submit",kind:"edit",style:{marginRight:8},children:"Save"}),Object(u.jsx)(w.a,{kind:"delete",onClick:l,children:"Delete"})]}):Object(u.jsx)(w.a,{type:"submit",kind:"add",style:{gridColumnEnd:"span 2"},children:"Add"})]})})}})})})}function W(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],l=Object(o.useState)([]),x=Object(c.a)(l,2),k=x[0],C=x[1],S=Object(o.useState)(),w=Object(c.a)(S,2),T=w[0],V=w[1],F=Object(o.useState)(!1),B=Object(c.a)(F,2),E=B[0],D=B[1],A=Object(o.useRef)(null),L=Object(o.useRef)(),q=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.d)("/task");case 3:(n=e.sent)&&(C(n),t&&((i=n.filter((function(e){return Boolean(e.deadline)}))).forEach((function(e){e.title=e.name,e.start=e.deadline})),a(i))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){q(!0),L.current&&new v.a(L.current,{itemSelector:".fc-event",eventData:function(e){return{title:e.getAttribute("title"),id:e.getAttribute("id")}}})}),[]);var I=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t.draggedEl.id,t.dateStr);case 3:e.sent&&q(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===(n=t.event.start)||void 0===n?void 0:n.toString())){e.next=5;break}return e.next=4,y(t.event.id,null===(a=t.event.start)||void 0===a?void 0:a.toString());case 4:e.sent;case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(s.a,{children:[Object(u.jsx)(N,{open:E,onClose:function(){return D(!1)},onDone:function(){return q(!0)},selectedTask:T}),Object(u.jsxs)(d.a,{container:!0,spacing:2,children:[Object(u.jsx)(d.a,{item:!0,xs:12,md:2,children:Object(u.jsxs)(b.a,{style:{borderRadius:20,padding:"1em",boxShadow:"rgba(0, 0, 0, 0.08) 0px 4px 12px"},children:[Object(u.jsx)(j.a,{variant:"h6",children:"Tasks"}),Object(u.jsx)(p.a,{my:2,textAlign:"center",borderBottom:"2px solid #cccc",children:Object(u.jsx)(f.a,{onClick:function(){V(void 0),D(!0)},children:"Add new task"})}),Object(u.jsx)("div",{id:"external-events",ref:function(e){return L.current=e},children:k.map((function(e){return!e.deadline&&Object(u.jsx)("div",{className:"fc-event",title:e.name,id:e.id,children:e.name},e.id)}))})]})}),Object(u.jsx)(d.a,{item:!0,xs:12,md:10,children:Object(u.jsx)(h.a,{children:Object(u.jsx)(O.a,{ref:function(e){return A.current=e},initialView:"dayGridMonth",rerenderDelay:10,eventDurationEditable:!1,editable:!0,droppable:!0,plugins:[m.a,v.b],events:n,eventClick:function(e){var t;if(console.log(null===(t=A.current)||void 0===t?void 0:t.getApi()),e.event.id){var n=k.find((function(t){return t.id===e.event.id}));n&&(V(n),D(!0))}},drop:I,eventDrop:R})})})]})]})}},414:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(18),r=n(3),i=n(2),c=(n(0),n(354)),u=n(238),o=n(1379),l=n(785),s=n(786),d=n(81);function b(e){var t=e.kind,n=Object(r.a)(e,["kind"]),b=Object(c.a)({btnStyle:{background:t?"add"===t?d.a.success:"edit"===t?d.a.warning:d.a.error:"default",borderRadius:"0.5em",boxShadow:"none",paddingRight:"25px",paddingLeft:"25px"}}),j={add:Object(i.jsx)(o.a,{}),edit:Object(i.jsx)(l.a,{}),delete:Object(i.jsx)(s.a,{})},p=b();return Object(i.jsx)(u.a,Object(a.a)(Object(a.a)({className:p.btnStyle,startIcon:t?j[t]:n.startIcon,variant:t?"contained":n.variant,color:t?"primary":n.color},n),{},{children:n.children}))}},422:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var a=n(18),r=n(15),i=n(3),c=n(2),u=n(0),o=n(241),l=n(1372),s=n(1401),d=function(e){var t=e.request,n=e.limit,l=e.getOptionLabel,d=e.getOptionValue,b=e.onChange,j=e.value,p=Object(i.a)(e,["request","limit","getOptionLabel","getOptionValue","onChange","value"]),f=Object(u.useState)([]),O=Object(r.a)(f,2),m=O[0],v=O[1],h=Object(u.useState)(),x=Object(r.a)(h,2),g=x[0],y=x[1];return Object(u.useEffect)((function(){var e=m.find((function(e){return d(e)===j}));y(e)}),[j,m,d]),Object(u.useEffect)((function(){t().then((function(e){v(n&&n>0?e.slice(0,n):e)})).catch((function(e){return console.log(e)}))}),[n,t]),Object(c.jsx)(s.a,{style:p.style,getOptionLabel:l,options:m,onChange:b,onBlur:p.onBlur,value:g,renderInput:function(e){return Object(c.jsx)(o.a,Object(a.a)(Object(a.a)({},e),{},{label:null===p||void 0===p?void 0:p.label,error:p.error,placeholder:p.placeholder,size:"small",variant:"outlined"}))}})},b=function(e){e.inputStyle;var t=e.items,n=e.itemTitleField,r=e.itemValueField,u=e.keyField,s=Object(i.a)(e,["inputStyle","items","itemTitleField","itemValueField","keyField"]);return Object(c.jsxs)(o.a,Object(a.a)(Object(a.a)({},s),{},{variant:"outlined",size:"small",select:!0,children:[Object(c.jsx)(l.a,{value:void 0,children:"None"}),t&&t.length>=0&&t.map((function(e,t){return Object(c.jsx)(l.a,{value:e[r],children:e[n]},u?e[u]:t)}))]}))},j=function(e){e.keyField;var t=e.request,n=e.itemValueField,o=e.itemTitleField,l=e.limit,s=e.getOptionList,d=Object(i.a)(e,["keyField","request","itemValueField","itemTitleField","limit","getOptionList"]),j=Object(u.useState)([]),p=Object(r.a)(j,2),f=p[0],O=p[1];return Object(u.useEffect)((function(){t().then((function(e){if(l&&l>0){var t=s?s(e):e.slice(0,l);O(t)}else{var n=s?s(e):e;O(n)}})).catch((function(e){return console.log(e)}))}),[s,l,t]),Object(c.jsx)(b,Object(a.a)(Object(a.a)({},d),{},{itemTitleField:o,itemValueField:n,items:f}))},p=function(e){var t=e.items,n=Object(i.a)(e,["items"]);return Object(c.jsx)(b,Object(a.a)({itemTitleField:"item",itemValueField:"item",items:t?t.map((function(e){return{item:e}})):[]},n))},f=function(e){return Object(c.jsx)(o.a,Object(a.a)(Object(a.a)({},e),{},{variant:"outlined",size:"small",select:!0,children:e.children}))}},423:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return o}));var a=n(18),r=n(2),i=(n(0),n(7)),c=n(180),u=Object(i.a)((function(e){return{root:{borderRadius:20,padding:"1em",boxShadow:"rgba(0, 0, 0, 0.08) 0px 4px 12px"}}}))((function(e){return Object(r.jsx)(c.a,Object(a.a)({},e))})),o=Object(i.a)((function(e){return{root:{borderRadius:10,padding:e.spacing(4),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#fff"}}}))((function(e){return Object(r.jsx)(c.a,Object(a.a)(Object(a.a)({},e),{},{elevation:5}))}))},787:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return o}));var a=n(80),r=n(20),i=a.c().shape({LineServiceRecordId:a.d().required()}),c=function(){return Object(r.d)("/ticket")},u=function(e){return Object(r.g)("/ticket",e)},o=function(e,t){return Object(r.f)("/ticket/".concat(e),t)}}}]);
//# sourceMappingURL=31.ab61ddcd.chunk.js.map