(this.webpackJsonpphocus=this.webpackJsonpphocus||[]).push([[29],{1401:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var c=n(31),i=n.n(c),r=n(65),a=n(15),o=n(2),u=n(0),l=n(157),s=n(238),d=n(569),b=n(421),j=n(159),f=n(414),O=n(183),m=n(594),v=function(e){var t=e.open,n=e.onClose,c=e.data,s=e.onDone,d=Object(u.useState)(null===c||void 0===c?void 0:c.name),b=Object(a.a)(d,2),v=b[0],h=b[1];Object(u.useEffect)((function(){h(null===c||void 0===c?void 0:c.name)}),[c]);var x=function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=6;break}return e.next=4,Object(m.b)(c.id);case 4:s(),n();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!c){e.next=9;break}return e.next=5,Object(m.d)(c.id,{name:v});case 5:s(),n(),e.next=13;break;case 9:return e.next=11,Object(m.a)(v);case 11:s(),n();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsx)(O.a,{open:t,onClose:n,maxWidth:"xs",fullWidth:!0,title:c?"Edit project":"Add new project",children:Object(o.jsx)("form",{onSubmit:p,children:Object(o.jsxs)(l.a,{m:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Object(o.jsx)(j.c,{label:"name",style:{flex:1,width:"100%",marginBottom:"13px"},fullWidth:!0,value:v,onChange:function(e){return h(e.target.value)}}),Object(o.jsxs)(l.a,{style:{width:"100%",display:"flex"},children:[c&&Object(o.jsx)(f.a,{style:{marginLeft:"40%",marginRight:"30px"},onClick:x,kind:"delete",children:"Delete"}),Object(o.jsx)(f.a,{kind:"add",type:"submit",style:{flexGrow:1,marginRight:"3px"},children:"save"})]})]})})})},h=n(87),x=n(80),p=n(384),y=n(408),g=n(422),w=n(572),C=n(518),k=n(162),S=n(576),F=n(20),I=x.c().shape({name:x.d().required()});function T(e){var t=e.open,n=e.onClose,c=e.activity,a=function(){var e=Object(r.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setSubmitting,console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(o.jsx)(O.a,{open:t,onClose:n,title:"Activity overview",children:Object(o.jsx)(l.a,{p:2,children:Object(o.jsx)(h.b,{initialValues:c,validationSchema:I,onSubmit:a,children:function(e){var t=e.values,n=e.errors,c=e.touched,i=e.handleChange,r=e.handleBlur;return Object(o.jsxs)(h.a,{children:[Object(o.jsxs)(l.a,{display:"grid",gridTemplateColumns:"auto auto auto",gridColumnGap:10,gridRowGap:5,children:[Object(o.jsx)(j.c,{error:Boolean(n.name&&c.name),name:"name",label:"name",value:t.name,onChange:i,onBlur:r}),Object(o.jsx)(j.c,{name:"subject",label:"subject",value:t.subject,onChange:i,onBlur:r}),Object(o.jsx)(j.c,{name:"location",label:"location",value:t.location,onChange:i,onBlur:r}),Object(o.jsx)(j.c,{name:"notes",label:"notes",value:t.notes,onChange:i,onBlur:r}),Object(o.jsx)(j.c,{type:"date",name:"startTime",label:"Start time",value:t.startTime,onChange:i,onBlur:r}),Object(o.jsx)(j.c,{type:"date",name:"endTime",label:"End time",value:t.endTime,onChange:i,onBlur:r}),Object(o.jsx)(g.c,{request:w.d,itemTitleField:"name",itemValueField:"id",label:"Client",name:"ClientId",value:t.ClientId,onChange:i,onBlur:r,style:{width:"100%"}}),Object(o.jsx)(g.c,{label:"Contact",name:"ContactId",request:C.d,itemTitleField:"lastName",itemValueField:"id",value:t.ContactId,onChange:i,onBlur:r,style:{width:"100%"}}),Object(o.jsx)(g.c,{label:"ActivityPriorityId",name:"ActivityPriorityId",request:function(){return Object(F.c)("/activitypriority")},itemTitleField:"name",itemValueField:"id",value:t.ActivityPriorityId,onChange:i,onBlur:r,style:{width:"100%"}}),Object(o.jsx)(g.c,{label:"Project",name:"ProjectId",request:m.c,itemTitleField:"name",itemValueField:"id",value:t.ProjectId,onChange:i,onBlur:r,style:{width:"100%"}}),Object(o.jsx)(g.c,{label:"Employee",name:"EmployeeId",request:k.e,itemTitleField:"username",itemValueField:"id",value:t.EmployeeId,onChange:i,onBlur:r,style:{width:"100%"}}),Object(o.jsx)(g.c,{label:"Quote",name:"QuoteId",request:S.e,itemTitleField:"number",itemValueField:"id",value:t.QuoteId,onChange:i,onBlur:r,style:{width:"100%"}}),Object(o.jsx)(g.c,{label:"ActivityCategoryId",name:"ActivityCategoryId",request:function(){return Object(F.c)("/activitycategory")},itemTitleField:"name",itemValueField:"id",value:t.ActivityCategoryId,onChange:i,onBlur:r,style:{width:"100%"}}),Object(o.jsx)(g.c,{label:"ActivityStatusId",name:"ActivityStatusId",request:function(){return Object(F.c)("/activitystatus")},itemTitleField:"name",itemValueField:"id",value:t.ActivityStatusId,onChange:i,onBlur:r,style:{width:"100%"}})]}),Object(o.jsxs)(l.a,{mt:1,display:"grid",gridTemplateColumns:"auto auto auto",gridColumnGap:10,children:[Object(o.jsx)(p.a,{name:"allDayActivity",control:Object(o.jsx)(y.a,{}),label:"All dat activity",checked:t.allDayActivity,onChange:i,onBlur:r}),Object(o.jsx)(p.a,{name:"notifyOnDay",control:Object(o.jsx)(y.a,{}),label:"Notify on day",checked:t.notifyOnDay,onChange:i,onBlur:r}),Object(o.jsx)(p.a,{name:"recurring",control:Object(o.jsx)(y.a,{}),label:"Recurring",checked:t.recurring,onChange:i,onBlur:r}),Object(o.jsx)(p.a,{name:"notifyNow",control:Object(o.jsx)(y.a,{}),label:"Notify now",checked:t.notifyNow,onChange:i,onBlur:r}),Object(o.jsx)(p.a,{name:"doNotShowOnCalendar",control:Object(o.jsx)(y.a,{}),label:"Do not show on calendar",checked:t.doNotShowOnCalendar,onChange:i,onBlur:r})]})]})}})})})}var B=n(888);function A(){var e=Object(u.useState)(0),t=Object(a.a)(e,2),n=t[0],c=t[1],j=Object(u.useState)(),f=Object(a.a)(j,2),O=f[0],h=f[1],x=Object(u.useState)([]),p=Object(a.a)(x,2),y=p[0],g=p[1],w=Object(u.useState)([]),C=Object(a.a)(w,2),k=C[0],S=C[1],F=Object(u.useState)(),I=Object(a.a)(F,2),A=I[0],q=I[1],V=Object(u.useState)(!1),R=Object(a.a)(V,2),D=R[0],E=R[1],G=Object(u.useState)(!1),N=Object(a.a)(G,2),P=N[0],L=N[1],M=Object(u.useCallback)(Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.c)();case 3:t=e.sent,g(t),h(null),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[g,h]),W=Object(u.useCallback)(Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!O){e.next=6;break}return e.next=4,Object(B.d)(O.id);case 4:t=e.sent,S(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[O,S]);Object(u.useEffect)((function(){M()}),[M]),Object(u.useEffect)((function(){1===n&&W()}),[n,W]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(v,{open:D,onClose:function(){return E(!1)},onDone:M,data:O}),A&&Object(o.jsx)(T,{open:P,onClose:function(){return L(!1)},activity:A}),Object(o.jsxs)(l.a,{my:2,display:"flex",alignItems:"center",children:[Object(o.jsx)(s.a,{onClick:function(){E(!0),h(void 0)},children:"Add new Project"}),Object(o.jsx)(s.a,{onClick:function(){return E(!0)},disabled:!O,children:"Edit project"}),Object(o.jsx)("div",{style:{flexGrow:1}}),Object(o.jsxs)(d.b,{value:n,onChange:function(e,t){return c(t)},children:[Object(o.jsx)(d.a,{label:"Overview"}),Object(o.jsx)(d.a,{label:"Details"})]})]}),Object(o.jsxs)(l.a,{children:[0===n&&Object(o.jsx)(b.b,{cols:[{field:"name"}],onRowSelected:function(e){h(e),c(1)},rows:y}),1===n&&Object(o.jsxs)(l.a,{children:[Object(o.jsx)("h4",{children:"Activities"}),Object(o.jsx)(b.b,{cols:[{field:"name"},{field:"subject"},{field:"location"},{field:"startTime",width:180},{field:"endTime",width:180},{field:"ActivityPriority",valueGetter:function(e){var t;return null===(t=e.row.ActivityPriority)||void 0===t?void 0:t.name},width:180},{field:"ActivityStatus",valueGetter:function(e){var t;return null===(t=e.row.ActivityStatus)||void 0===t?void 0:t.name},width:180},{field:"notes"}],rows:k,onRowSelected:function(e){q(e),L(!0)}})]})]})]})}},414:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(18),i=n(3),r=n(2),a=(n(0),n(353)),o=n(238),u=n(1376),l=n(981),s=n(982),d=n(81);function b(e){var t=e.kind,n=Object(i.a)(e,["kind"]),b=Object(a.a)({btnStyle:{background:t?"add"===t?d.a.success:"edit"===t?d.a.warning:d.a.error:"default"}}),j={add:Object(r.jsx)(u.a,{}),edit:Object(r.jsx)(l.a,{}),delete:Object(r.jsx)(s.a,{})},f=b();return Object(r.jsx)(o.a,Object(c.a)(Object(c.a)({className:f.btnStyle,startIcon:t?j[t]:n.startIcon,variant:t?"contained":n.variant,color:t?"primary":n.color},n),{},{children:n.children}))}},421:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var c=n(2),i=(n(0),n(353)),r=n(452),a=Object(i.a)({root:{backgroundColor:"#f9f9f9",border:"none","& .MuiDataGrid-columnsContainer":{backgroundColor:"#202731",color:"#fff"},"& .MuiDataGrid-iconSeparator":{display:"none",width:0,height:0,opacity:0},"& .Mui-selected":{boxShadow:" rgba(149, 157, 165, 0.2) 0px 8px 24px",backgroundColor:"#fff !important"},"& .MuiDataGrid-sortIcon":{fill:"white"}}});function o(e){var t=e.onRowSelected,n=e.rows,i=e.cols,o=e.height,u=a();return Object(c.jsx)("div",{style:{flexGrow:1,height:o||450},children:Object(c.jsx)(r.a,{density:"compact",components:{Toolbar:r.b},className:u.root,onRowSelected:function(e){t&&t(e.data)},columns:i,rows:n})})}var u=function(e){var t=e.onRowSelected,n=e.rows,i=e.cols,o=(e.height,a());return Object(c.jsx)(r.a,{density:"compact",components:{Toolbar:r.b},className:o.root,onRowSelected:function(e){t&&t(e.data)},columns:i,rows:n})}},422:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return O}));var c=n(18),i=n(15),r=n(3),a=n(2),o=n(0),u=n(241),l=n(1369),s=n(1400),d=function(e){var t=e.request,n=e.limit,l=e.getOptionLabel,d=e.getOptionValue,b=e.onChange,j=e.value,f=Object(r.a)(e,["request","limit","getOptionLabel","getOptionValue","onChange","value"]),O=Object(o.useState)([]),m=Object(i.a)(O,2),v=m[0],h=m[1],x=Object(o.useState)(),p=Object(i.a)(x,2),y=p[0],g=p[1];return Object(o.useEffect)((function(){var e=v.find((function(e){return d(e)===j}));g(e)}),[j,v,d]),Object(o.useEffect)((function(){t().then((function(e){h(n&&n>0?e.slice(0,n):e)})).catch((function(e){return console.log(e)}))}),[n,t]),Object(a.jsx)(s.a,{style:f.style,getOptionLabel:l,options:v,onChange:b,onBlur:f.onBlur,value:y,renderInput:function(e){return Object(a.jsx)(u.a,Object(c.a)(Object(c.a)({},e),{},{label:null===f||void 0===f?void 0:f.label,error:f.error,placeholder:f.placeholder,size:"small",variant:"outlined"}))}})},b=function(e){e.inputStyle;var t=e.items,n=e.itemTitleField,i=e.itemValueField,o=e.keyField,s=Object(r.a)(e,["inputStyle","items","itemTitleField","itemValueField","keyField"]);return Object(a.jsxs)(u.a,Object(c.a)(Object(c.a)({},s),{},{variant:"outlined",size:"small",select:!0,children:[Object(a.jsx)(l.a,{value:void 0,children:"None"}),t&&t.length>=0&&t.map((function(e,t){return Object(a.jsx)(l.a,{value:e[i],children:e[n]},o?e[o]:t)}))]}))},j=function(e){e.keyField;var t=e.request,n=e.itemValueField,u=e.itemTitleField,l=e.limit,s=e.getOptionList,d=Object(r.a)(e,["keyField","request","itemValueField","itemTitleField","limit","getOptionList"]),j=Object(o.useState)([]),f=Object(i.a)(j,2),O=f[0],m=f[1];return Object(o.useEffect)((function(){t().then((function(e){if(l&&l>0){var t=s?s(e):e.slice(0,l);m(t)}else{var n=s?s(e):e;m(n)}})).catch((function(e){return console.log(e)}))}),[s,l,t]),Object(a.jsx)(b,Object(c.a)(Object(c.a)({},d),{},{itemTitleField:u,itemValueField:n,items:O}))},f=function(e){var t=e.items,n=Object(r.a)(e,["items"]);return Object(a.jsx)(b,Object(c.a)({itemTitleField:"item",itemValueField:"item",items:t?t.map((function(e){return{item:e}})):[]},n))},O=function(e){return Object(a.jsx)(u.a,Object(c.a)(Object(c.a)({},e),{},{variant:"outlined",size:"small",select:!0,children:e.children}))}},518:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return u}));var c=n(20),i=function(){return Object(c.d)("/contact")},r=function(e,t){return Object(c.d)("/contact/".concat(e,"/").concat(t))},a=function(e,t,n){return Object(c.g)("/contact/".concat(e,"/").concat(t),n)},o=function(e,t){return Object(c.f)("/contact/".concat(e),t)},u=function(e){return Object(c.b)("/contact/".concat(e))}},569:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var c=n(18),i=n(2),r=(n(0),n(7)),a=n(1397),o=n(248),u=n(1377),l=Object(r.a)({root:{minHeight:"45px",border:"1px solid #848484",borderRadius:"0.5em"},indicator:{backgroundColor:"#ccc",height:0}})(a.a),s=Object(r.a)((function(e){return Object(o.a)({root:{textTransform:"none",minWidth:"2em",minHeight:"45px","&:hover":{color:"#aaa",opacity:1},"&$selected":{backgroundColor:"#1a73e8",borderRadius:"0.5em",color:"#fff"},"&:active":{borderRadius:"0.5em",color:"#aaa"},"&:focus":{borderRadius:"0.5em",color:"#fff"}},selected:{}})}))((function(e){return Object(i.jsx)(u.a,Object(c.a)({disableRipple:!0},e))}))},572:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var c=n(20),i=function(){return Object(c.d)("/customer")},r=function(e){return Object(c.g)("/customer",e)},a=function(e){return Object(c.b)("/customer/".concat(e))},o=function(e,t){return Object(c.f)("/customer/".concat(e),t)}},576:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return l}));var c=n(20),i=function(){return Object(c.d)("/quote")},r=function(e){return Object(c.d)("/quote/".concat(e))},a=function(e){return Object(c.g)("/quote",e)},o=function(e){return Object(c.g)("/quote",e)},u=function(e,t){return Object(c.f)("/quote/".concat(e),t)},l=function(e){return Object(c.b)("/quote/".concat(e))}},594:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o}));var c=n(20),i=function(){return Object(c.d)("/project")},r=function(e){return Object(c.g)("/project",{name:e})},a=function(e,t){return Object(c.f)("/project/".concat(e),t)},o=function(e){return Object(c.b)("/project/".concat(e))}},888:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return u}));var c=n(20),i=function(){return Object(c.d)("/activity")},r=function(e){return Object(c.d)("/activity/project/".concat(e))},a=function(e){return Object(c.g)("/activity",e)},o=function(e,t){return Object(c.f)("/activity/".concat(e),t)},u=function(e){return Object(c.b)("/activity/".concat(e))}}}]);
//# sourceMappingURL=29.14ccb1de.chunk.js.map